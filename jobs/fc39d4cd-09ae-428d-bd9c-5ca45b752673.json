{
  "id" : "fc39d4cd-09ae-428d-bd9c-5ca45b752673",
  "name" : "Stine Customers 2 Salesforce",
  "lastRun" : [ 2019, 3, 18, 14, 25, 37, 680000000 ],
  "enabled" : false,
  "tasks" : [ {
    "id" : "5522f05b-f01c-463a-b675-78b2040b8e2e",
    "ordinal" : 1,
    "taskParameters" : [ {
      "id" : "88b26700-ffae-4feb-9e1a-67e465fb6dfc",
      "ordinal" : 1,
      "value" : "",
      "desc" : "Login user for authentication",
      "name" : "user",
      "valueType" : 0,
      "refId" : "4f75fa01-c582-49aa-8f20-1b48462a8b28",
      "refValue" : "johnny.appleseed",
      "created" : [ 2019, 3, 7, 7, 43, 53, 901000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 901000000 ]
    }, {
      "id" : "c3108d62-2812-4e13-bf9f-dc9cb1889247",
      "ordinal" : 2,
      "value" : "",
      "desc" : "Login password for authentication",
      "name" : "password",
      "valueType" : 0,
      "refId" : "48fbf631-e014-45ee-a8eb-298ac7d1fa21",
      "refValue" : "somepassword",
      "created" : [ 2019, 3, 7, 7, 43, 53, 901000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 901000000 ]
    }, {
      "id" : "60bc49dc-3482-4fb2-b680-a84af4254c77",
      "ordinal" : 3,
      "value" : "s3://s3.amazonaws.com/com.ignitiontransform.importfiles/stine/input/customer_20190306_151038.csv",
      "desc" : "URL to file",
      "name" : "url",
      "valueType" : 0,
      "refId" : "45c250b3-72b5-4d81-a392-6ab7c6f5709d",
      "refValue" : "ftp://someftphost/input/*.xml",
      "created" : [ 2019, 3, 7, 7, 43, 53, 902000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 902000000 ]
    }, {
      "id" : "8a4a956e-80b8-4c14-ba99-a9b443bdd335",
      "ordinal" : 4,
      "value" : "CustomersInput",
      "desc" : "Key name of output file",
      "name" : "outputKey",
      "valueType" : 0,
      "refId" : "201b77ea-8e35-4c3c-9f45-dd8afc123e10",
      "refValue" : "OutputFileKey",
      "created" : [ 2019, 3, 7, 7, 43, 53, 902000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 902000000 ]
    }, {
      "id" : "8f2a3f78-529d-49b8-a167-2085cbdd8e67",
      "ordinal" : 5,
      "value" : "",
      "desc" : "Javascript function to filter results",
      "name" : "filterFunction",
      "valueType" : 2,
      "refId" : "5f033806-4a10-45cc-8624-047cfc4bfb93",
      "refValue" : "function filter(files) {\n\treturn files;\n}",
      "created" : [ 2019, 3, 7, 7, 43, 53, 902000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 902000000 ]
    }, {
      "id" : "6ce0c386-319a-4a97-ab69-adc494257f1f",
      "ordinal" : 6,
      "value" : "",
      "desc" : "Sort function to use",
      "name" : "sortFunction",
      "valueType" : 2,
      "refId" : "8ff654e9-a4bf-4eee-b00e-b5a443e6ee2c",
      "refValue" : "function sort(files) {\n   return files;\n}",
      "created" : [ 2019, 3, 7, 7, 43, 53, 903000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 903000000 ]
    } ],
    "job" : {
      "id" : "fc39d4cd-09ae-428d-bd9c-5ca45b752673",
      "name" : "Stine Customers 2 Salesforce",
      "lastRun" : [ 2019, 3, 18, 14, 25, 37, 680000000 ],
      "enabled" : false,
      "desc" : "",
      "status" : "Ready",
      "key" : "IC-00000007",
      "readOnly" : false,
      "environment" : {
        "id" : "89689ad1-f311-4bd7-aacd-0188ded73369"
      },
      "domain" : {
        "id" : "bd629e46-0892-4060-abe4-fc7269247405",
        "name" : "Ignition",
        "timeZone" : "America/New_York",
        "applicationURL" : "http://127.0.0.1:8080",
        "awsRegion" : "us-east-1",
        "updated" : [ 2018, 10, 16, 14, 33, 20, 313000000 ],
        "created" : [ 1970, 1, 18, 9, 19, 5, 459000000 ]
      },
      "version" : 45,
      "updated" : [ 2019, 4, 8, 18, 43, 43, 21000000 ],
      "created" : [ 2019, 3, 7, 7, 43, 53, 898000000 ],
      "folder" : { }
    },
    "name" : "Download File to Dictionary Task",
    "clazz" : "core.DownloadFileToDictionaryTask",
    "enabled" : true,
    "desc" : "Task used to download a file from FTP, SFTP, WebDav, S3, or Local to dictionary entry.",
    "refId" : "84211b05-40ce-4939-874d-825b983c3bda",
    "stopOnError" : true,
    "reportOnError" : true,
    "nodeTask" : false,
    "notify" : false,
    "nodeEligible" : true,
    "interval" : 0,
    "created" : [ 2019, 3, 7, 7, 43, 53, 899000000 ],
    "updated" : [ 2019, 3, 7, 7, 43, 53, 899000000 ],
    "reference" : false
  }, {
    "id" : "d194b51c-f98b-402a-87f1-58c99ca38a7b",
    "ordinal" : 2,
    "taskParameters" : [ {
      "id" : "2fea1bb3-897e-4874-9c95-670ff3010ede",
      "ordinal" : 1,
      "value" : "2",
      "desc" : "Row to start on (1 based)",
      "name" : "rowStart",
      "valueType" : 0,
      "refId" : "47724df6-66a7-4b27-8322-5e98e9886e0b",
      "refValue" : "2",
      "created" : [ 2019, 3, 7, 7, 43, 53, 904000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 904000000 ]
    }, {
      "id" : "88e17abd-96c7-4bc2-b161-5b49255ea41c",
      "ordinal" : 2,
      "value" : "CustomersMap",
      "desc" : "Key name of output",
      "name" : "outputKey",
      "valueType" : 0,
      "refId" : "043408c6-e4f7-45bc-b822-6c09b752000c",
      "refValue" : "OutputKey",
      "created" : [ 2019, 3, 7, 7, 43, 53, 904000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 904000000 ]
    }, {
      "id" : "0b122181-81d8-4552-9107-2b03566d9c0d",
      "ordinal" : 3,
      "value" : "CustomersInput",
      "desc" : "Key name of input file",
      "name" : "inputKey",
      "valueType" : 2,
      "refId" : "56ec030a-8897-4990-a140-29ee0a2dfbe7",
      "refValue" : "InputFileKey",
      "created" : [ 2019, 3, 7, 7, 43, 53, 905000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 905000000 ]
    }, {
      "id" : "08ae55d9-5a30-43b1-82d9-d09e21d9f84d",
      "ordinal" : 4,
      "value" : ",",
      "desc" : "Column separator",
      "name" : "separator",
      "valueType" : 0,
      "refId" : "9817070a-8eae-4091-b938-9d112f39b6fb",
      "refValue" : ",",
      "created" : [ 2019, 3, 7, 7, 43, 53, 905000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 905000000 ]
    }, {
      "id" : "73a2ad29-b54e-4240-9007-8184b74fab37",
      "ordinal" : 5,
      "value" : "",
      "desc" : "Column configuration",
      "name" : "config",
      "valueType" : 2,
      "refId" : "ff11c3c9-0903-4766-94ac-12d966b471f4",
      "refValue" : "[\n    {\"column\":1,\"key\":\"columnOneName\"},\n    {\"column\":2,\"key\":\"columnTwoName\"},\n    {\"column\":3,\"key\":\"columnThreeName\"}\n]",
      "created" : [ 2019, 3, 7, 7, 43, 53, 905000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 905000000 ]
    }, {
      "id" : "ef54fa85-4f9a-4320-b545-02cd7639855b",
      "ordinal" : 6,
      "value" : "true",
      "desc" : "true to use file cache",
      "name" : "filePersist",
      "valueType" : 0,
      "refId" : "71816090-35c6-4463-a432-3bef8c4dab72",
      "refValue" : "true",
      "created" : [ 2019, 3, 7, 7, 43, 53, 908000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 908000000 ]
    } ],
    "job" : {
      "id" : "fc39d4cd-09ae-428d-bd9c-5ca45b752673",
      "name" : "Stine Customers 2 Salesforce",
      "lastRun" : [ 2019, 3, 18, 14, 25, 37, 680000000 ],
      "enabled" : false,
      "desc" : "",
      "status" : "Ready",
      "key" : "IC-00000007",
      "readOnly" : false,
      "environment" : {
        "id" : "89689ad1-f311-4bd7-aacd-0188ded73369"
      },
      "domain" : {
        "id" : "bd629e46-0892-4060-abe4-fc7269247405",
        "name" : "Ignition",
        "timeZone" : "America/New_York",
        "applicationURL" : "http://127.0.0.1:8080",
        "awsRegion" : "us-east-1",
        "updated" : [ 2018, 10, 16, 14, 33, 20, 313000000 ],
        "created" : [ 1970, 1, 18, 9, 19, 5, 459000000 ]
      },
      "version" : 45,
      "updated" : [ 2019, 4, 8, 18, 43, 43, 21000000 ],
      "created" : [ 2019, 3, 7, 7, 43, 53, 898000000 ],
      "folder" : { }
    },
    "name" : "CSV to Dictionary Task",
    "clazz" : "core.CSVToDictionaryTask",
    "enabled" : true,
    "desc" : "Task used to read a csv file into a dictionary entry.",
    "refId" : "192f4f05-bf1c-4b52-ba40-3d474aa46356",
    "stopOnError" : true,
    "reportOnError" : true,
    "nodeTask" : false,
    "notify" : false,
    "nodeEligible" : false,
    "interval" : 0,
    "created" : [ 2019, 3, 7, 7, 43, 53, 903000000 ],
    "updated" : [ 2019, 3, 7, 7, 43, 53, 903000000 ],
    "reference" : false
  }, {
    "id" : "1b84a6ca-688f-465f-9551-344c5d6447c5",
    "ordinal" : 3,
    "taskParameters" : [ {
      "id" : "631415b1-aba0-4d8e-8171-c3d43105198e",
      "ordinal" : 1,
      "value" : "let inDebug = dict.inDebug; \n$includeScript('global');\n\nlet dictionaryToXMLTask = ICT.TASK('DictionaryToXMLTask');\n// start with a sequence of 10, this will be customer-no\nvar sequence = 10;\nlet JavaString = Java.type('java.lang.String');\nlet MIFIClass = Java.type('com.ignitioncommerce.transform.util.MapInFileIterator');\nvar customers = {\n    'customer-list': {\n        '@xmlns': 'http://www.demandware.com/xml/impex/customer/2006-10-31',\n        '@list-id': 'Lax',\n    }\n};\nvar idx = 1;\nvar customerIterator = new MIFIClass(dict.get('JOB').getDomain(),  dict.get('CustomersMap'));\nwhile (customerIterator.hasNext()) {\n    let customer = customerIterator.next();\n    var gender = '';\n    if (customer.get('8') === 'Male') {\n        gender = 2;\n    } else if (customer.get('8') == 'Female') {\n        gender = 1;\n    }\n    // for now, let's just do 10\n    //if (idx === 10) break;\n    \n    var brainTreeId = customer.get('3');\n\n    if (customer.get('0') !== '') {\n        customers['customer-list']['customer['+idx+']'] = {\n            '@customer-no': JavaString.format(\"D%08d\", sequence++),\n            'credentials': {\n                'login': customer.get('0'),\n                'enabled-flag': true,\n            },\n            'profile': {\n                'first-name': customer.get('7'),\n                'last-name': customer.get('10'),\n                'email': customer.get('0'),\n                'gender': gender,\n                'custom-attributes': {\n                    'custom-attribute[0]': {\n                        '@attribute-id': 'legacyCustomer',\n                        '_text': 'true'\n                    },\n                    'custom-attribute[1]': {\n                        '@attribute-id': 'isBraintree',\n                        '_text': brainTreeId === '' ? 'false': 'true'\n                    },\n                    'custom-attribute[2]': {\n                        '@attribute-id': 'braintreeCustomerId',\n                        '_text': brainTreeId\n                    }\n                }\n            },\n            'addresses': {\n                \n            }\n        };\n        // addresses may not exist\n        if (customer.get('25') !== '') {\n            customers['customer-list']['customer['+idx+']'].addresses.address = {\n                '@address-id': 'Home',\n                '@preferred': true,\n                'first-name': customer.get('29'),\n                'last-name': customer.get('30'),\n                'company-name': customer.get('26'),\n                'address1': customer.get('35'),\n                'address2': customer.get('36'),\n                'city': customer.get('25'),\n                'postal-code': customer.get('32'),\n                'state-code': customer.get('34'),\n                'country-code': customer.get('27'),\n                'phone': customer.get('37')\n            };\n        }\n        idx++;\n    }\n}\nvar xml = dictionaryToXMLTask.script(dict, customers, null);\nvar newXml = xml.getBytes();\n\n",
      "desc" : "Script to execute",
      "name" : "script",
      "valueType" : 2,
      "refId" : "61734d1c-1ff6-4a2b-a251-00f3bd76b9ed",
      "refValue" : "Javascript",
      "created" : [ 2019, 3, 7, 7, 43, 53, 909000000 ],
      "updated" : [ 2019, 4, 8, 14, 43, 43, 14000000 ]
    } ],
    "job" : {
      "id" : "fc39d4cd-09ae-428d-bd9c-5ca45b752673",
      "name" : "Stine Customers 2 Salesforce",
      "lastRun" : [ 2019, 3, 18, 14, 25, 37, 680000000 ],
      "enabled" : false,
      "desc" : "",
      "status" : "Ready",
      "key" : "IC-00000007",
      "readOnly" : false,
      "environment" : {
        "id" : "89689ad1-f311-4bd7-aacd-0188ded73369"
      },
      "domain" : {
        "id" : "bd629e46-0892-4060-abe4-fc7269247405",
        "name" : "Ignition",
        "timeZone" : "America/New_York",
        "applicationURL" : "http://127.0.0.1:8080",
        "awsRegion" : "us-east-1",
        "updated" : [ 2018, 10, 16, 14, 33, 20, 313000000 ],
        "created" : [ 1970, 1, 18, 9, 19, 5, 459000000 ]
      },
      "version" : 45,
      "updated" : [ 2019, 4, 8, 18, 43, 43, 21000000 ],
      "created" : [ 2019, 3, 7, 7, 43, 53, 898000000 ],
      "folder" : { }
    },
    "name" : "Script Task",
    "clazz" : "core.ScriptTask",
    "enabled" : true,
    "desc" : "Task used to execute custom javascript.",
    "refId" : "f5d44f40-cbd4-45fa-b45f-b062e546ad0f",
    "stopOnError" : true,
    "reportOnError" : true,
    "nodeTask" : false,
    "notify" : false,
    "nodeEligible" : false,
    "interval" : 0,
    "created" : [ 2019, 3, 7, 7, 43, 53, 908000000 ],
    "updated" : [ 2019, 3, 7, 7, 43, 53, 908000000 ],
    "reference" : false
  }, {
    "id" : "90ee06ad-fe97-4d3a-b0e1-90bf78cc46cb",
    "ordinal" : 4,
    "taskParameters" : [ {
      "id" : "23421274-bc7d-466d-8531-68678202b2b8",
      "ordinal" : 1,
      "value" : "",
      "desc" : "Login user for authentication",
      "name" : "user",
      "valueType" : 0,
      "refId" : "a68a11c6-cef6-4408-85f5-4f0728e8e3c7",
      "refValue" : "johnny.appleseed",
      "created" : [ 2019, 3, 7, 7, 43, 53, 910000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 910000000 ]
    }, {
      "id" : "190cfba7-e68d-4809-a3f4-5656223222d8",
      "ordinal" : 2,
      "value" : "",
      "desc" : "Login password for authentication",
      "name" : "password",
      "valueType" : 0,
      "refId" : "a34fea04-c5b1-442c-975e-1655184f32f3",
      "refValue" : "somepassword",
      "created" : [ 2019, 3, 7, 7, 43, 53, 911000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 911000000 ]
    }, {
      "id" : "97406c2c-b98a-41c4-a2a8-8546c7eb04aa",
      "ordinal" : 3,
      "value" : "s3://s3.amazonaws.com/com.ignitiontransform.importfiles/stine/output/customers_converted.xml",
      "desc" : "URL to file",
      "name" : "url",
      "valueType" : 2,
      "refId" : "b102d706-66ce-4d8b-8944-ec8ba327b7b2",
      "refValue" : "ftp://someftphost/input/myfile.xml",
      "created" : [ 2019, 3, 7, 7, 43, 53, 911000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 911000000 ]
    }, {
      "id" : "efec59f7-7340-49ac-8ee0-6fa318405dd6",
      "ordinal" : 4,
      "value" : "Customers",
      "desc" : "Key name of input file",
      "name" : "inputKey",
      "valueType" : 0,
      "refId" : "06532b8a-daf2-457c-8c65-701e9cc0ec01",
      "refValue" : "InputFileKey",
      "created" : [ 2019, 3, 7, 7, 43, 53, 911000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 911000000 ]
    }, {
      "id" : "f5df9157-be83-45f1-8ec4-5e144f567dcd",
      "ordinal" : 5,
      "value" : "true",
      "desc" : "Should we overwrite",
      "name" : "overwrite",
      "valueType" : 0,
      "refId" : "5fa90437-e92d-468d-8890-edf5c8a0f2bc",
      "refValue" : "true",
      "created" : [ 2019, 3, 7, 7, 43, 53, 911000000 ],
      "updated" : [ 2019, 3, 7, 7, 43, 53, 911000000 ]
    } ],
    "job" : {
      "id" : "fc39d4cd-09ae-428d-bd9c-5ca45b752673",
      "name" : "Stine Customers 2 Salesforce",
      "lastRun" : [ 2019, 3, 18, 14, 25, 37, 680000000 ],
      "enabled" : false,
      "desc" : "",
      "status" : "Ready",
      "key" : "IC-00000007",
      "readOnly" : false,
      "environment" : {
        "id" : "89689ad1-f311-4bd7-aacd-0188ded73369"
      },
      "domain" : {
        "id" : "bd629e46-0892-4060-abe4-fc7269247405",
        "name" : "Ignition",
        "timeZone" : "America/New_York",
        "applicationURL" : "http://127.0.0.1:8080",
        "awsRegion" : "us-east-1",
        "updated" : [ 2018, 10, 16, 14, 33, 20, 313000000 ],
        "created" : [ 1970, 1, 18, 9, 19, 5, 459000000 ]
      },
      "version" : 45,
      "updated" : [ 2019, 4, 8, 18, 43, 43, 21000000 ],
      "created" : [ 2019, 3, 7, 7, 43, 53, 898000000 ],
      "folder" : { }
    },
    "name" : "Upload File from Dictionary Task",
    "clazz" : "core.UploadFileFromDictionaryTask",
    "enabled" : false,
    "desc" : "Task used to upload a file to FTP, SFTP, WebDav, S3, or Local from a dictionary entry.",
    "refId" : "fb285dc7-59db-4382-b004-df6ee6147084",
    "stopOnError" : true,
    "reportOnError" : true,
    "nodeTask" : false,
    "notify" : false,
    "nodeEligible" : true,
    "interval" : 0,
    "created" : [ 2019, 3, 7, 7, 43, 53, 909000000 ],
    "updated" : [ 2019, 3, 18, 14, 25, 20, 877000000 ],
    "reference" : false
  } ],
  "desc" : "",
  "status" : "Ready",
  "key" : "IC-00000007",
  "readOnly" : false,
  "environment" : {
    "id" : "89689ad1-f311-4bd7-aacd-0188ded73369",
    "name" : "Staging",
    "titleCss" : ".title {\n\tcolor: #d1e4f7;\n\tbackground-color: #2991e2;\n}",
    "updated" : [ 1969, 12, 31, 19, 0 ],
    "created" : [ 1969, 12, 31, 19, 0 ],
    "domain" : {
      "id" : "bd629e46-0892-4060-abe4-fc7269247405"
    }
  },
  "domain" : {
    "id" : "bd629e46-0892-4060-abe4-fc7269247405",
    "name" : "Ignition",
    "timeZone" : "America/New_York",
    "applicationURL" : "http://127.0.0.1:8080",
    "awsRegion" : "us-east-1",
    "updated" : [ 2018, 10, 16, 14, 33, 20, 313000000 ],
    "created" : [ 1970, 1, 18, 9, 19, 5, 459000000 ]
  },
  "version" : 45,
  "updated" : [ 2019, 4, 8, 18, 43, 43, 21000000 ],
  "created" : [ 2019, 3, 7, 7, 43, 53, 898000000 ],
  "folder" : { }
}